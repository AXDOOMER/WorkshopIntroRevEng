% UC Berkeley Beamer Theme
% https://www.overleaf.com/latex/templates/uc-berkeley-beamer-theme/bywswngntrws

% beamerthemeUCBerkeley.sty v1.0 (March 17, 2017)
% by Overleaf (LianTze Lim, Ryan Looney)
\ProvidesPackage{beamerthemeUCBerkeley}

\RequirePackage{silence}
\WarningsOff[mathdesign/mdbch]

\RequirePackage{etoolbox}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{caption}[numbered]

%\usepackage{lastpage}
%\usepackage{fancyhdr}
%\pagestyle{fancy} 
%\fancyfoot[CO,CE]{\thepage\ / \pageref{LastPage}}

% \RequirePackage[T1]{fontenc}
% \RequirePackage[charter,expert]{mathdesign}
% \RequirePackage[scaled=.96,oldstyle]{XCharter}
% \RequirePackage[default,scale=0.96,osfigures]{opensans}
\RequirePackage{fontspec}
\setromanfont[Ligatures={TeX,Common}]{Georgia}

\IfFileExists{fonts/OpenSans-Regular.ttf}
{\setsansfont[Ligatures={TeX,Common},
  Scale=0.90,
  Path=fonts/,
  UprightFont=*-Regular,
  BoldFont=*-Bold,
  ItalicFont=*-Italic,
  BoldItalicFont=*-BoldItalic
  ]{OpenSans}}
{\setsansfont[Ligatures={TeX,Common}]{Verdana}}

\RequirePackage{tikz}

\definecolor{BerkeleyGold}{RGB}{193,129,45}
\definecolor{BerkeleyBlueText}{RGB}{48,99,126}
\definecolor{BerkeleyTableGold}{RGB}{222,157,46}
\definecolor{BerkeleyTableBlue1}{RGB}{207,226,234}
\definecolor{BerkeleyTableBlue2}{RGB}{232,241,245}
\definecolor{Indigo}{RGB}{75,0,130}
%\definecolor{CustomLinkColor}{RGB}{0,49,98}
%\definecolor{CustomLinkColor}{RGB}{40,0,130}
\definecolor{CustomLinkColor}{RGB}{174,42,49}

%% TODO: DEFINE AN HIDDEN BLOCK FOR SOLUTIONS

\setbeamertemplate{title page}[default][left]
\setbeamerfont{title}{family=\rmfamily,size=\Huge}
\setbeamerfont{author}{size=\Large}

\setbeamersize{text margin left=2em, text margin right=2em}

\setbeamertemplate{frametitle}{\vskip0.1\paperheight\insertframetitle} 
\setbeamerfont{frametitle}{family=\rmfamily,series=\mdseries,size=\LARGE}
\setbeamerfont{block title}{family=\rmfamily,size=\large}
\setbeamercolor{titlelike}{fg=BerkeleyGold}
\setbeamercolor{normal text}{fg=BerkeleyBlueText}
\setbeamercolor{structure}{fg=BerkeleyBlueText}
\setbeamercolor{block title}{fg=BerkeleyGold}
\hypersetup{colorlinks,linkcolor=,urlcolor=CustomLinkColor}

\setbeamertemplate{itemize item}{\textbullet}
\setbeamertemplate{itemize subitem}{--}
\setbeamertemplate{itemize subsubitem}{\textbullet}
\setlength{\leftmargini}{1.25em}
\setlength{\leftmarginii}{1em}
\setlength{\leftmarginiii}{1em}

\pgfdeclareimage[width=\paperwidth]{blueslope}{blueslope}
%\pgfdeclareimage[width=0.075\paperwidth]{logo}{logo_dci_white_red}
\pgfdeclareimage[width=0.08\paperwidth]{logo}{cedille-logo}

\setbeamertemplate{background}{%
\begin{tikzpicture}[overlay,remember picture]
% blue slope on the background%
\node[anchor=south west,inner sep=0pt,draw=none,yshift=-6pt] at (current page.south west) {\pgfuseimage{blueslope}};%
% our logo %
\node[anchor=south west,inner sep=0pt,draw=none,xshift=0.05\paperwidth,yshift=0.04\paperheight] at (current page.south west) {\pgfuseimage{logo}};%
% page number on each slide %
\node[anchor=south east,inner sep=0pt,draw=none,xshift=-0.1\paperwidth,yshift=0.042\paperheight] at (current page.south east) {\textcolor{white}{\thepage}};%
\end{tikzpicture}%
}

\setbeamertemplate{footline}{%
\vskip0.15\paperheight
}

\newcommand{\smallframetitle}{%
  \setbeamertemplate{frametitle}{\vskip0.1\paperheight\insertframetitle}
  \setbeamerfont{frametitle}{size=\large,series=\bfseries}
}
\newcommand{\normalframetitle}{%
  \setbeamertemplate{frametitle}{\vskip0.1\paperheight\insertframetitle} 
  \setbeamerfont{frametitle}{size=\LARGE,series=\mdseries}
}

\renewcommand{\arraystretch}{1.2}
\newcommand{\tableheadrow}{\rowcolor{BerkeleyTableGold}}
\newcommand{\tableheadcol}[1]{{\bfseries\color{white}#1}}
\rowcolors{2}{BerkeleyTableBlue1}{BerkeleyTableBlue2}
\AtBeginEnvironment{tabular}{\color{black}}
